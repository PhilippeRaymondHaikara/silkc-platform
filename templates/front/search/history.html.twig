{% extends 'front/layout.html.twig' %}

{% block title %}History{% endblock %}

{% block stylesheets %}
    {{ encore_entry_link_tags('app') }}
{% endblock %}

{% block content %}
<table id="datatable-work" class="table table-striped table-bordered" style="width:100%">
    <thead>
    <tr>
        <th>{{ 'search_history.label.name'|trans }}</th>
        <th>{{ 'search_history.label.registered_on'|trans }}</th>
        <th>{{ 'search_history.label.registered_by'|trans }}</th>
        <th>{{ 'search_history.label.status'|trans }}</th>
        <th>{{ 'search_history.label.action'|trans }}</th>
    </tr>
    </thead>
    <tbody>
    {% if searches is defined and searches is iterable and searches|length > 0 %}
        {% for search in searches %}
            {% set type = (search.occupation) ? 'occupation' : 'skill' %}
            {% set item =  (type == 'occupation') ? search.occupation : search.skill %}
            <tr>
                <td>{{ item.preferredLabel }}</td>
                <td>{{ type|trans }}</td>
                <td>{{ search.createdAt|date('Y/m/d') }}</td>
                <td>{{ search.countResults }}</td>
                <td>{{ search.countSearches }}</td>
                <td>
                    <a href="{{ path('app_search_results', { 'type': type, 'id': item.id }) }}" class="btn btn-primary">
                        <i class="fas fa-search"></i>
                    </a>
                </td>
            </tr>
        {% endfor %}
    {% endif %}
    </tbody>
</table>
{% endblock %}


{% block javascripts %}
    {{ encore_entry_script_tags('main') }}
    {{ encore_entry_script_tags('common') }}
{% endblock %}
