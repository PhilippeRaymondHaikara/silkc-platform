<form class="form-inline form-search" method="POST" action="{{ path('app_search_results') }}">
	<label for="input-search">{{ 'training_opportunities_to_land_your_dream_job_as'|trans  }}:</label>

	<div class="form-search-occupation"  
        style="display: {{ search is defined and attribute(search, 'type_search') is defined and search.type_search == 'skill' ? 'none' : 'block' }}">
		{% include 'front/elements/input_search.html.twig'
            with {
                'id': 'input-search-occupation',
                'url': '/apip/occupations',
                'autocomplete': true,
                'placeholder': 'search_by_job_placeholder'|trans,
                'formats': 'json',
                'pagination': 'false',
                'name': 'training_search_by_occupation',
                'value': search is defined and attribute(search, 'name') is defined and search.name is not empty ? search.name : '',
                'id_input_hidden': search is defined and attribute(search, 'id') is defined and search.id is not empty ? search.id : ''
            }
        %}
	</div>

	<div class="form-search-skill" 
        style="display: {{ (search is defined and attribute(search, 'type_search') is defined and search.type_search == 'occupation') 
                                or (search is defined and search is empty) 
                                or (search is not defined) ? 'none' : 'block' }}"}>
		{% include 'front/elements/input_search.html.twig'
            with {
                'id': 'input-search-skill',
                'url': '/apip/skills',
                'autocomplete': true,
                'placeholder': 'search_by_skill_placeholder'|trans,
                'formats': 'json',
                'pagination': 'false',
                'name': 'training_search_by_skill',
                'value': search is defined and attribute(search, 'name') is defined and search.name is not empty ? search.name : '',
                'id_input_hidden': search is defined and attribute(search, 'id') is defined and search.id is not empty ? search.id : ''
            }
        %}
	</div>

	<select class="form-control" name="type_search">
		<option value="occupation" {% if search is defined and attribute(search, 'type_search') is defined and search.type_search == 'occupation' %} selected {% endif %}>{{ 'home.search_by_occupation'|trans }}</option>
		<option value="skill" {% if search is defined and attribute(search, 'type_search') is defined and search.type_search == 'skill' %} selected {% endif %}>{{ 'home.search_by_skill'|trans  }}</option>
	</select>

	<button type="submit" class="btn btn-primary ml-2 mr-2 disabled-search" {% if search is not defined or (search is defined and search is empty) %} disabled {% endif %}>{{ 'label.search'|trans }}</button>

	<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#advanced-search" aria-expanded="false" aria-controls="advanced-search" {% if is_granted('IS_AUTHENTICATED_FULLY') == false %} disabled {% endif %}>
		<i class="fas fa-chevron-down"></i> {{ 'label.advanced_search'|trans }}
	</button>

	<div class="collapse" id="advanced-search">
		<div>
            <div class="grp">
                <label class="main-title">{{ 'label.distance_from'|trans }}</label>
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <div class="form-group flex-column align-items-start">
                            <div id="searchmap"></div>
                            <div id="map"></div>
                            <input type="hidden" id="city" name="city" value="{{ requestParams.city is defined ? requestParams.city : '' }}">
                            <input type="hidden" id="inputCity" name="inputCity" value="{{ requestParams.inputCity is defined ? requestParams.inputCity : '' }}">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group flex-column align-items-start">
                            <div class="d-flex flex-row">
                                <label for="formControlRangeDistance" class="mr-1">{{ 'label.distance'|trans }}</label>
                                <span id="distanceVal">{{ requestParams.distance is defined ? requestParams.distance : 0 }}km</span>
                            </div>
                            <input id="formControlRangeDistance" data-slider-id='formControlRangeDistance' type="text" data-slider-min="0" data-slider-max="1000" data-slider-step="1" data-slider-value="{{ requestParams.distance is defined ? requestParams.distance : 0 }}"/>
                            <input type="hidden" id="distance" name="distance" value="{{ requestParams.distance is defined ? requestParams.distance : 0 }}">
                        </div>
                    </div>
                </div>
            </div>

            <div class="grp">
                <div class="row">
                    <div class="col-md-9">
                        <div class="form-group flex-column align-items-start">
                            <div class="w-100 d-flex flex-column">
                                <div class="d-flex flex-row main-title">
                                    <label for="formControlRangePrice" class="mr-1">{{ 'label.price'|trans }}</label>
                                    <span id="priceValMin"><span>{{ requestParams.minPrice is defined ? requestParams.minPrice : 0 }}</span><span>€</span></span>
                                    <span class="mr-1 ml-1"> - </span>
                                    <span id="priceValMax"><span>{{ requestParams.maxPrice is defined ? requestParams.maxPrice : 5000 }}</span><span>€</span></span>
                                </div>
                                <div class="d-flex flex-row align-items-center flex-nowrap">
                                    <input id="formControlRangePrice" type="text" class="form-control" value="" data-slider-min="0" data-slider-max="5000" data-slider-step="5" data-slider-value="[{{ requestParams.minPrice is defined ? requestParams.minPrice : 0 }},{{ requestParams.maxPrice is defined ? requestParams.maxPrice : 5000 }}]"/>
                                    <div class="input-group-append ml-4">
                                        <select id="devise" class="form-control custom-select">
                                            <option value="€">Euro</option>
                                            <option value="zł">Złoty</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" id="minPrice" name="minPrice" value="{{ requestParams.minPrice is defined ? requestParams.minPrice : 0 }}">
                            <input type="hidden" id="maxPrice" name="maxPrice" value="{{ requestParams.maxPrice is defined ? requestParams.maxPrice : 5000 }}">
                        </div>
                    </div>
                </div>
			</div>

            <div class="grp">
                <label class="main-title">{{ 'label.date'|trans }}</label>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="d-flex flex-row">
                                <div class="form-group flex-column align-items-start mr-2">
                                    <label for="startAt">{{ 'label.start'|trans }}</label>
                                    <input type="date" id="startAt" class="form-control" name="startAt" value="{{ requestParams.startAt is defined ? requestParams.startAt : '' }}">
                                </div>

                                <div class="form-group flex-column align-items-start">
                                    <label for="endAt">{{ 'label.end'|trans }}</label>
                                    <input type="date" id="endAt" class="form-control" name="endAt" value="{{ requestParams.endAt is defined ? requestParams.endAt : '' }}">
                                </div>
                            </div>
                        </div>
                    </div>
			</div>

            <div class="grp">
                <div class="row">
                    <div class="col-2">
                        <div class="form-group">
                            <div class="form-check">        
                                <input type="checkbox" name="isOnline" id="isOnline" class="form-check-input" {{ requestParams.isOnline is defined ? 'checked="cheked"' : '' }}>
                                <label class="form-check-label" for="isOnline">{{ 'label.online'|trans }}</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-2">
                        <div class="form-group">
                            <div class="form-check">        
                                <input type="checkbox" name="isOnlineMonitored" id="isOnlineMonitored" class="form-check-input" {{ requestParams.isOnlineMonitored is defined ? 'checked="cheked"' : '' }}>
                                <label class="form-check-label" for="isOnlineMonitored">{{ 'label.is_online_monitored'|trans }}</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-2">
                        <div class="form-group">
                            <div class="form-check">        
                                <input type="checkbox" name="isPresential" id="isPresential" class="form-check-input" {{ requestParams.isPresential is defined ? 'checked="cheked"' : '' }}>
                                <label class="form-check-label" for="isPresential">{{ 'label.is_presential'|trans }}</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grp grp-last">
                <div class="row mb-2">
                    <div class="col-md-12">
                        <div class="form-group">
                            <div class="form-check">        
                                <input type="checkbox" name="excludeTraining" id="exclude-training-without-completed-description" class="form-check-input" {{ requestParams.excludeTraining is defined ? 'checked="cheked"' : '' }}>
                                <label class="form-check-label" for="exclude-training-without-completed-description">{{ 'label.exclude_training_without_a_completed_description'|trans }}</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <div class="form-check">
                                <input type="checkbox" name="specifiedDuration" id="without-specified-duration" class="form-check-input" {{ requestParams.specifiedDuration is defined ? 'checked="cheked"' : '' }}>
                                <label class="form-check-label" for="without-specified-duration">{{ 'label.without_specified_duration'|trans }}</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
			<div class="row">
				<div class="col-md-12 text-right">
                    <button type="button" class="btn btn-warning btn-clear">{{ 'label.clear'|trans }}</button>
                    <button type="submit" class="btn btn-primary">{{ 'label.refine_my_search'|trans }}</button>
				</div>
			</div>
		</div>
	</div>
</form>
